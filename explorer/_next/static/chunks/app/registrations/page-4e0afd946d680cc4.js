(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{3195:function(e,r,t){Promise.resolve().then(t.bind(t,1809))},1809:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return U}});var n=t(3827),a=t(7907),i=t(4090),s=t(828),l=t(9792),o=t(7019),c=t(5900),d=t(6480),u=t.n(d),h=t(2540),g=t(9476),f=t(2865);let x=(0,t(9764).Z)("h4");x.displayName="DivStyledAsH4";let p=i.forwardRef((e,r)=>{let{className:t,bsPrefix:a,as:i=x,...s}=e;return a=(0,f.vE)(a,"alert-heading"),(0,n.jsx)(i,{ref:r,className:u()(t,a),...s})});p.displayName="AlertHeading";var j=t(9405);let v=i.forwardRef((e,r)=>{let{className:t,bsPrefix:a,as:i=j.Z,...s}=e;return a=(0,f.vE)(a,"alert-link"),(0,n.jsx)(i,{ref:r,className:u()(t,a),...s})});v.displayName="AlertLink";var b=t(3534),k=t(2912);let m=i.forwardRef((e,r)=>{let{bsPrefix:t,show:a=!0,closeLabel:i="Close alert",closeVariant:s,className:l,children:o,variant:c="primary",onClose:d,dismissible:x,transition:p=b.Z,...j}=(0,h.Ch)(e,{show:"onClose"}),v=(0,f.vE)(t,"alert"),m=(0,g.Z)(e=>{d&&d(!1,e)}),y=!0===p?b.Z:p,Z=(0,n.jsxs)("div",{role:"alert",...y?void 0:j,ref:r,className:u()(l,v,c&&"".concat(v,"-").concat(c),x&&"".concat(v,"-dismissible")),children:[x&&(0,n.jsx)(k.Z,{onClick:m,"aria-label":i,variant:s}),o]});return y?(0,n.jsx)(y,{unmountOnExit:!0,...j,ref:void 0,in:a,children:Z}):a?Z:null});m.displayName="Alert";var y=Object.assign(m,{Link:v,Heading:p}),Z=t(5914),w=t(8826);let N=i.forwardRef((e,r)=>{let{bsPrefix:t,size:a,vertical:i=!1,className:s,role:l="group",as:o="div",...c}=e,d=(0,f.vE)(t,"btn-group"),h=d;return i&&(h="".concat(d,"-vertical")),(0,n.jsx)(o,{...c,ref:r,role:l,className:u()(s,h,a&&"".concat(d,"-").concat(a))})});N.displayName="ButtonGroup";var S=t(477),M=t(590),C=t(6136),_=t(1196),E=t(9064),B=t(7585),A=t(1860),F=t(9957),P=t(825),R=t(7898);function U(){var e,r;let t=(0,s.I0)(),d=(0,a.useSearchParams)(),[u,h]=(0,i.useState)(!0),[g,f]=(0,i.useState)(void 0),[x,p]=(0,i.useState)(void 0),[j,v]=(0,i.useState)(void 0),[b,k]=(0,i.useState)(void 0),[m,C]=(0,i.useState)(void 0),[U,I]=(0,i.useState)([]),[L,T]=(0,i.useState)({stakesBreakdown:{},signersWeight:{}});(0,i.useEffect)(()=>{let e;let r=d.get(E.W),n=Number(d.get("epoch"));p(r),v(n),(0,o.checkUrl)(r)?Number.isInteger(n)||(e="invalidEpoch"):e="invalidAggregatorUrl",void 0===e?(fetch("".concat(r,"/signers/registered/").concat(n)).then(e=>200===e.status?e.json():{}).then(e=>{k(e.signing_at),I(e.registrations),T({stakesBreakdown:(0,l.Q2)(e.registrations),signersWeight:(0,l.Fw)(e.registrations)}),h(!1)}).catch(e=>{k(void 0),I([]),h(!1),console.error("Fetch registrations error:",e)}),fetch("".concat(r,"/epoch-settings")).then(e=>200===e.status?e.json():{}).then(e=>C(null==e?void 0:e.epoch)).catch(e=>{C(void 0),console.error("Fetch current epoch in epoch-settings error:",e)}),t((0,B.Q9)(r))):f(e)},[d]);let W=(0,i.useCallback)(e=>{let r=new URLSearchParams;return r.set("aggregator",x),r.set("epoch",e),"/registrations?".concat(r.toString())},[x]),D=W(j-1),O=W(m),H=W(j+1);if(void 0!==g){let e="";switch(g){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,n.jsxs)(c.Z,{gap:3,children:[(0,n.jsx)("h2",{children:"Registrations"}),(0,n.jsxs)(y,{variant:"danger",children:[(0,n.jsx)(y.Heading,{children:"Oh snap! You got an error!"}),(0,n.jsx)("p",{children:e})]})]})}return(0,n.jsxs)(c.Z,{gap:3,children:[(0,n.jsxs)("h2",{children:["Registrations"," ",(0,n.jsx)(P.Z,{href:"".concat(x,"/signers/registered/").concat(j),variant:"outline-light",size:"sm"})]}),(0,n.jsx)(Z.Z,{children:(0,n.jsx)(w.Z,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Aggregator:"})}),(0,n.jsx)("td",{children:x})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Registration epoch:"})}),(0,n.jsx)("td",{children:j})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Signing at epoch:"})}),(0,n.jsx)("td",{children:null!=b?b:"?"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Number of signers:"})}),(0,n.jsx)("td",{children:null!==(e=null==U?void 0:U.length)&&void 0!==e?e:0})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:"Total stakes:"})}),(0,n.jsx)("td",{children:(0,n.jsx)(F.Z,{lovelace:null!==(r=null==U?void 0:U.reduce((e,r)=>e+r.stake,0))&&void 0!==r?r:0})})]})]})})}),(0,n.jsx)(Z.Z,{children:(0,n.jsx)("div",{children:Number.isInteger(j)&&(0,n.jsxs)(N,{children:[(0,n.jsxs)(A.Z,{href:D,children:["Previous Epoch (",j-1,")"]}),(0,n.jsxs)(A.Z,{href:O,disabled:void 0===m||m===j,children:["Current Epoch (",m,")"]}),(0,n.jsxs)(A.Z,{href:H,disabled:m<=j,children:["Next Epoch (",j+1,")"]})]})})}),u?(0,n.jsx)(S.Z,{animation:"grow"}):void 0===U||0===U.length?(0,n.jsxs)(y,{variant:"info",children:[(0,n.jsxs)(y.Heading,{children:["No registrations for epoch ",j]}),(0,n.jsx)("p",{children:m===j?"The aggregator did not receive registrations yet for the current epoch.":m<j?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,n.jsxs)(Z.Z,{children:[(0,n.jsxs)(M.Z,{xs:12,sm:12,md:7,children:[(0,n.jsx)("h3",{children:"Signers"}),(0,n.jsx)(R.Z,{signers:U,aggregator:x,displayIndexes:!0})]}),(0,n.jsx)(M.Z,{xs:12,sm:12,md:5,children:(0,n.jsxs)(c.Z,{gap:3,children:[(0,n.jsx)("h3",{children:"Stakes breakdown"}),(0,n.jsx)(_.$Q,{data:L.stakesBreakdown}),(0,n.jsx)("h3",{children:"Signers weight"}),(0,n.jsx)(_.by,{data:L.signersWeight})]})})]})]})}C.kL.register(C.qi,C.uw,C.f$,C.ZL,C.Dx,C.u,C.De),(0,l.hZ)(C.kL)},9792:function(e,r,t){"use strict";t.d(r,{Fw:function(){return i},Q2:function(){return a},hZ:function(){return s}});var n=t(7019);function a(e){let r=e=>e/1e12,t=(null!=e?e:[]).map(e=>r(e.stake));return{labels:["< 1M₳","≥ 1M₳ < 10M₳","≥ 10M₳ < 25M₳","≥ 25M₳ < 50M₳","≥ 50M₳ < 75M₳","≥ 75M₳ < 100M₳","≥ 100M₳"],datasets:[{label:"Number of signers",data:[t.filter(e=>e<1).length,t.filter(e=>e>=1&&e<10).length,t.filter(e=>e>=10&&e<25).length,t.filter(e=>e>=25&&e<50).length,t.filter(e=>e>=50&&e<75).length,t.filter(e=>e>=75&&e<100).length,t.filter(e=>e>100).length]}]}}function i(e){let r=null!=e?e:[];return{labels:r.map(e=>e.party_id),datasets:[{label:"Stake (₳)",data:r.map(e=>(0,n.toAda)(e.stake))}]}}function s(e){let r=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],t=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];e.defaults.plugins.legend.display=!1,e.defaults.elements.arc.backgroundColor=r,e.defaults.elements.arc.borderColor=t,e.defaults.elements.arc.borderWidth=1,e.defaults.elements.bar.backgroundColor=r,e.defaults.elements.bar.borderColor=t,e.defaults.elements.bar.borderWidth=1}},1860:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(3827);t(4090);var a=t(8792);function i(e){let{href:r,children:t,className:i,disabled:s,...l}=e;return!0===s?i="".concat(i," disabled"):s=!1,(0,n.jsx)(a.default,{href:r,"aria-disabled":s,className:"btn btn-primary link-underline-opacity-0 link-light ".concat(i),...l,children:t})}},4171:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(3827);t(4090);var a=t(9190),i=t(6767),s=t(6879);function l(e){let{partyId:r}=e;return(0,n.jsxs)("span",{className:"text-break",children:[r,(0,n.jsx)(n.Fragment,{children:" "}),(0,n.jsx)(a.Z,{overlay:(0,n.jsx)(i.Z,{children:"Copy"}),children:(0,n.jsx)(s.Z,{variant:"link",onClick:function(){window.isSecureContext&&r&&navigator.clipboard.writeText(r).then(()=>{})},size:"md",className:"p-0",children:(0,n.jsx)("i",{className:"bi bi-copy",style:{color:"black"}})})})]})}t(7019)},3800:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(3827),a=t(4090),i=t(828),s=t(7585),l=t(7019),o=t(703),c=t(9190),d=t(6767);function u(e){var r;let{aggregator:t,partyId:u,...h}=e,g=(0,i.v9)(e=>(0,s.Mj)(e,t,u)),[f,x]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{(null==g?void 0:g.network)?x((0,l.getCExplorerUrlForPool)(g.network,u)):x(void 0)},[u,g.network]),void 0!==f?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("a",{href:f,target:"_blank",className:"link-dark link-underline-light",children:(0,n.jsx)(c.Z,{overlay:(0,n.jsx)(d.Z,{children:"See in CExplorer"}),children:(0,n.jsxs)("span",{children:[(0,n.jsx)(o.default,{src:"/explorer/cexplorer_logo.png",alt:"CExplorer Logo",style:{verticalAlign:"text-top"},width:20,height:20}),(0,n.jsx)(n.Fragment,{children:" "}),null!==(r=g.pool_ticker)&&void 0!==r?r:"Not available"]})})})}):(0,n.jsx)("span",{children:g.pool_ticker})}},825:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(3827);t(4090);var a=t(9190),i=t(6767),s=t(6879);function l(e){return(0,n.jsx)(a.Z,{overlay:(0,n.jsx)(i.Z,{children:"Raw JSON"}),children:(0,n.jsx)(s.Z,{variant:"outline-secondary",target:"_blank",...e,children:(0,n.jsx)("i",{className:"bi bi-filetype-json",style:{color:"black"}})})})}},7898:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(3827);t(4090);var a=t(8826),i=t(4171),s=t(657),l=t(3800),o=t(9957);function c(e){let{signers:r,aggregator:t,displayIndexes:c,...d}=e;return(0,n.jsxs)(a.Z,{responsive:!0,striped:!0,...d,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[void 0!==c&&(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Party id"}),(0,n.jsx)("th",{children:"Pool Ticker"}),(0,n.jsx)("th",{style:{textAlign:"end"},children:"Stake"})]})}),(0,n.jsx)("tbody",{children:r.map((e,r)=>(0,n.jsxs)("tr",{children:[!0===c&&(0,n.jsx)("td",{children:r}),(0,n.jsxs)("td",{children:[(0,n.jsx)(s.Z,{tooltip:"Verified Signer"})," ",(0,n.jsx)(i.Z,{partyId:e.party_id})]}),(0,n.jsx)("td",{children:(0,n.jsx)(l.Z,{aggregator:t,partyId:e.party_id})}),(0,n.jsx)("td",{style:{textAlign:"end"},children:(0,n.jsx)(o.Z,{lovelace:e.stake})})]},e.party_id))})]})}},9957:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(3827);t(4090);var a=t(9190),i=t(6767),s=t(7019);function l(e){let{lovelace:r}=e;return(0,n.jsx)(a.Z,{overlay:(0,n.jsxs)(i.Z,{children:[(0,s.formatCurrency)((0,s.toAda)(r),20),"₳"]}),children:(0,n.jsx)("span",{children:(0,s.formatStake)(r)})})}},657:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(3827);t(4090);var a=t(9190),i=t(6767);function s(e){return(0,n.jsx)(a.Z,{overlay:(0,n.jsx)(i.Z,{children:e.tooltip}),children:(0,n.jsx)("a",{href:"#",className:"badge bg-success",children:(0,n.jsx)("i",{className:"bi bi-shield-lock"})})})}},9064:function(e,r,t){"use strict";t.d(r,{W:function(){return n}});let n="aggregator"},7585:function(e,r,t){"use strict";t.d(r,{Mj:function(){return o},Q9:function(){return s},Ux:function(){return i}});var n=t(8508),a=t(4419);let i=(0,n.oM)({name:"pools",initialState:{list:[]},reducers:{},extraReducers:e=>e.addCase(s.fulfilled,(e,r)=>{if(r.payload.keep_cached_data)return;let t=l(e,r.payload.aggregator);t?(t.network=r.payload.network,t.pools=r.payload.pools,t.date=r.payload.date):e.list.push({aggregator:r.payload.aggregator,date:r.payload.date,network:r.payload.network,pools:r.payload.pools})})}),s=(0,n.hg)("pools/updateForAggregator",(e,r)=>{var t;let n=l(r.getState().pools,e),a=Date.now();return a-(null!==(t=null==n?void 0:n.date)&&void 0!==t?t:0)>216e5?fetch("".concat(e,"/signers/tickers")).then(e=>200===e.status?e.json():{}).then(r=>{var t;return{aggregator:e,date:a,network:r.network,pools:null!==(t=r.signers)&&void 0!==t?t:[]}}):{keep_cached_data:!0}}),l=(e,r)=>e.list.find(e=>e.aggregator===r),o=(0,a.P1)([e=>e.pools,(e,r,t)=>({aggregator:r,poolId:t})],(e,r)=>{let t=l(e,r.aggregator),n=null==t?void 0:t.pools.find(e=>e.party_id===r.poolId);return{network:null==t?void 0:t.network,...n}});i.reducer},7019:function(e){"use strict";let r=e=>e/1e6,t=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString(void 0,{maximumFractionDigits:r})};e.exports={checkUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},formatStake:function(e){let n=r(e),a=[{suffix:"B",value:1e9},{suffix:"M",value:1e6},{suffix:"K",value:1e3},{suffix:"",value:1}].find(e=>Math.abs(n)>=e.value-.001);return a?"".concat(t(n/a.value)).concat(a.suffix,"₳"):"".concat(t(n),"₳")},toAda:r,formatCurrency:t,formatBytes:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(r<0?0:r))+" "+["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][t]},formatPartyId:function(e){return("string"==typeof e||e instanceof String)&&e.length>15?e.slice(0,10)+"…"+e.slice(-5):e},getCExplorerUrlForPool:function(e,r){let t;let n="cexplorer.io/pool/".concat(r);switch(e){case"mainnet":t="https://".concat(n);break;case"preprod":t="https://preprod.".concat(n);break;case"preview":t="https://preview.".concat(n)}return t},formatProcessDuration:function(e){let r=performance.now()-e,t=Math.floor(r/6e4),n=Math.floor(r%6e4/1e3);return t>0?"".concat(t," minutes and ").concat(n," seconds"):"".concat(n," seconds")},computeAggregatorNetworkFromUrl:function(e){let r=e.match(/aggregator\.(.*?)\.api/);return r&&r[1]?r[1]:null}}}},function(e){e.O(0,[674,126,514,971,69,744],function(){return e(e.s=3195)}),_N_E=e.O()}]);