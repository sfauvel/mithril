"use strict";(self.webpackChunkmithril_doc=self.webpackChunkmithril_doc||[]).push([[7836],{74770:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(85893),i=n(3905);const a={slug:5,title:"5. Use rfc3339 for date formatting \n",authors:[{name:"Mithril Team"}],tags:["Accepted"],date:new Date("2023-06-21T00:00:00.000Z")},o=void 0,s={permalink:"/doc/adr/5",source:"@site/adr/005-use-rfc3339-for-dates.md",title:"5. Use rfc3339 for date formatting \n",description:"Status",date:"2023-06-21T00:00:00.000Z",formattedDate:"June 21, 2023",tags:[{label:"Accepted",permalink:"/doc/adr/tags/accepted"}],readingTime:1.18,hasTruncateMarker:!1,authors:[{name:"Mithril Team"}],frontMatter:{slug:"5",title:"5. Use rfc3339 for date formatting \n",authors:[{name:"Mithril Team"}],tags:["Accepted"],date:"2023-06-21T00:00:00.000Z"},unlisted:!1,prevItem:{title:"6. Errors implementation Standard\n",permalink:"/doc/adr/6"},nextItem:{title:"4. Mithril Network Upgrade Strategy\n",permalink:"/doc/adr/4"}},c={authorsImageUrls:[void 0]},l=[{value:"Status",id:"status",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Consequences",id:"consequences",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"status",children:"Status"}),"\n",(0,r.jsx)(t.p,{children:"Accepted"}),"\n",(0,r.jsx)(t.h2,{id:"context",children:"Context"}),"\n",(0,r.jsx)(t.p,{children:"Previously, on the Mithril project we did not have a preferred format for the dates in our applications, leading to\nmultiple formats being used."}),"\n",(0,r.jsxs)(t.p,{children:["For example when querying a certificate from an aggregator, the ",(0,r.jsx)(t.code,{children:"initiated_at"})," field did not specify the timezone,\ntimezone that could be found in the ",(0,r.jsx)(t.code,{children:"sealed_at"})," field:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "initiated_at": "2023-05-26T00:02:23",\n  "sealed_at": "2023-05-26T00:03:23.998753492Z"\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Same problem in our databases where a date could be stored without timezone and milliseconds (ie: ",(0,r.jsx)(t.code,{children:"2023-06-13 16:35:28"}),")\nin one table column and with them in another (ie: ",(0,r.jsx)(t.code,{children:"2023-06-13T16:35:28.143292875Z"}),")."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc3339",children:"RFC 3339"})," is a widely used, easily readable, mostly numeric (no\ntranslation is needed to parse the day or the month), format. Also, it always includes the timezone meaning that our\nclient can convert such date to their local time if needed."]}),"\n",(0,r.jsx)(t.h2,{id:"decision",children:"Decision"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Therefore"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["We commit to use ",(0,r.jsx)(t.strong,{children:"RFC 3339"})," compatible date and time whenever we need to store or show a date and time."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"consequences",children:"Consequences"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["All dates and time must use a dedicated type in the application, ie: the ",(0,r.jsx)(t.code,{children:"DateTime<Utc>"})," type from\n",(0,r.jsx)(t.a,{href:"https://crates.io/crates/chrono",children:"chrono"})," crate.","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["This means that dates must ",(0,r.jsx)(t.strong,{children:"never"})," be stored in our types using Strings."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["Internally, we will always use the ",(0,r.jsx)(t.strong,{children:"UTC timezone"}),", to avoid useless conversions between timezones."]}),"\n",(0,r.jsx)(t.li,{children:"Users or scripts querying dates from our applications or from our databases will be able to parse all of them using\nthe same format."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.ah)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3905:(e,t,n)=>{n.d(t,{ah:()=>l});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=i,p=u["".concat(c,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(p,o(o({ref:t},h),{},{components:n})):r.createElement(p,o({ref:t},h))}));h.displayName="MDXCreateElement"}}]);